class RadialMenu{constructor({fontFamily:t,fontSize:i,innerCircle:s,outerCircle:e,rotation:h,shadowBlur:o,shadowColor:r,shadowOffsetX:a,shadowOffsetY:n,backgroundColor:c,borderColor:l,textColor:d,textBorderColor:f,textShadowColor:w,textShadowBlur:u,textShadowOffsetX:C,textShadowOffsetY:b,buttons:x,posX:v,posY:g,isFixed:S,zIndex:O}={}){if(this.TWOPI=2*Math.PI,this.scale=window.devicePixelRatio,this.fontFamily=t||"FontAwesome",this.fontSize=i||14,isNaN(this.fontSize))throw"Font size must be a number";if(this.innerCircle=isNaN(s)?50:s,this.outerCircle=isNaN(e)?100:e,this.innerCircle>this.outerCircle)throw"Inner circle can't be larger than outer circle";if(this.innerCircle<0)throw"Inner circle can't be negative";this.rotation=Math.abs(h%this.TWOPI)||0,this.shadowColor=r||"rgba(0,0,0,0.5)",this.shadowBlur=isNaN(o)?10:o,this.shadowOffsetX=isNaN(a)?3:a,this.shadowOffsetY=isNaN(n)?3:n,this.backgroundColor=c||"#EEE",this.borderColor=l||"#FFF",this.textColor=d||"#000",this.textBorderColor=f||"transparent",this.textShadowColor=w||"transparent",this.textShadowBlur=isNaN(u)?10:u,this.textShadowOffsetX=isNaN(C)?3:C,this.textShadowOffsetY=isNaN(b)?3:b,this.buttons=x||[{text:"",action:()=>{alert(1)}},{text:"",action:()=>{alert(2)}},{text:"",action:()=>{alert(3)}}],this.checkButtons(),this.posX=v||0,this.posY=g||0,this.isFixed=S||!1,this.zIndex=O||9999,this.canvas=document.createElement("canvas"),document.body.appendChild(this.canvas),this.init(),this.draw(),this.addEvent()}init(){this.step=this.TWOPI/this.buttons.length,this.w=2*this.outerCircle+2*this.shadowBlur+2*this.shadowOffsetX,this.h=2*this.outerCircle+2*this.shadowBlur+2*this.shadowOffsetY,this.canvas.style.display="none",this.canvas.style.position="fixed",this.canvas.style.width=this.w+"px",this.canvas.style.height=this.h+"px",this.canvas.width=this.w*this.scale,this.canvas.height=this.h*this.scale,this.c=this.canvas.getContext("2d"),this.c.scale(this.scale,this.scale),this.c.font=this.fontSize+"px "+this.fontFamily,this.canvas.style.zIndex=this.zIndex,this.w2=this.w>>1,this.h2=this.h>>1,this.backgroundColor instanceof Object&&(this.backgroundColor=this.createGradient(this.backgroundColor)),this.borderColor instanceof Object&&(this.borderColor=this.createGradient(this.borderColor)),this.shadowColor instanceof Object&&(this.shadowColor=this.createGradient(this.shadowColor)),this.textColor instanceof Object&&(this.textColor=this.createGradient(this.textColor)),this.textBorderColor instanceof Object&&(this.textBorderColor=this.createGradient(this.textBorderColor)),this.textShadowColor instanceof Object&&(this.textShadowColor=this.createGradient(this.textShadowColor));for(let t=0;t<this.buttons.length;t++){this.buttons[t].ini=(t*this.step+this.rotation)%this.TWOPI,this.buttons[t].fin=(this.buttons[t].ini+this.step)%this.TWOPI,this.buttons[t].ini>this.buttons[t].fin&&(this.rest=t);const i=this.buttons[t].ini+this.step/2;this.buttons[t].centerX=Math.cos(i)*(this.innerCircle+(this.outerCircle-this.innerCircle)/2)-this.fontSize/2,this.buttons[t].centerY=Math.sin(i)*(this.innerCircle+(this.outerCircle-this.innerCircle)/2)+this.fontSize/4}}draw(){this.c.imageSmoothingEnabled=!0,this.c.imageSmoothingQuality="high",this.c.clearRect(0,0,this.w,this.h),this.c.shadowColor=this.shadowColor,this.c.shadowBlur=this.shadowBlur,this.c.shadowOffsetX=this.shadowOffsetX,this.c.shadowOffsetY=this.shadowOffsetY,this.c.beginPath(),this.c.arc(this.w2,this.h2,this.outerCircle,0,this.TWOPI),this.c.arc(this.w2,this.h2,this.innerCircle,this.TWOPI,0,!0),this.c.fillStyle=this.shadowColor,this.c.fill();for(let t=0;t<this.buttons.length;t++){const i=this.buttons[t];this.c.shadowBlur=0,this.c.shadowColor="transparent",this.c.fillStyle="backgroundColor"in i?i.backgroundColor:this.backgroundColor,this.c.strokeStyle="borderColor"in i?i.borderColor:this.borderColor,this.c.beginPath(),this.c.arc(this.w2,this.h2,this.outerCircle,i.ini,i.fin),this.c.arc(this.w2,this.h2,this.innerCircle,i.fin,i.ini,!0),this.c.closePath(),this.c.fill(),this.c.stroke(),this.c.fillStyle="textColor"in i?i.textColor:this.textColor,this.c.strokeStyle="textBorderColor"in i?i.textBorderColor:this.textBorderColor,this.c.shadowColor="textShadowColor"in i?i.textShadowColor:this.textShadowColor,this.c.shadowBlur="textShadowBlur"in i?i.textShadowBlur:this.textShadowBlur,this.c.shadowOffsetX="textShadowOffsetX"in i?i.textShadowOffsetX:this.textShadowOffsetX,this.c.shadowOffsetY="textShadowOffsetY"in i?i.textShadowOffsetY:this.textShadowOffsetY,this.c.save(),this.c.translate(this.w2,this.h2),this.c.fillText(i.text,i.centerX,i.centerY),this.c.strokeText(i.text,i.centerX,i.centerY),this.c.restore()}}addEvent(){if(this.canvas.addEventListener("click",t=>{const i=this.canvas.getBoundingClientRect(),s=this.w/i.width,e=this.h/i.height,h=(i.left+this.w2)*s,o=(i.top+this.h2)*e,r=this.distance(t.clientX,t.clientY,h,o);let a=Math.atan2(t.clientY-o,t.clientX-h);if(a=a>0?a:this.TWOPI+a,r>this.innerCircle&&r<this.outerCircle){for(let t=0;t<this.buttons.length;t++)if(a>=this.buttons[t].ini&&a<=this.buttons[t].fin)return void this.buttons[t].action();this.buttons[this.rest].action()}}),this.isFixed)return this.setPos(this.posX,this.posY),void this.show();document.addEventListener("click",t=>{this.hide()}),document.oncontextmenu=(t=>{t.preventDefault(),this.setPos(t.clientX-this.w2,t.clientY-this.h2),this.show()}),!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)&&(document.addEventListener("touchstart",t=>{this.timer=setTimeout(()=>{this.setPos(t.touches[0].clientX-this.w2,t.touches[0].clientY-this.h2),this.show()},500)}),document.addEventListener("touchend",()=>{this.timer&&clearTimeout(this.timer)}))}distance(t,i,s,e){return Math.sqrt((s-t)**2+(e-i)**2)}hide(){this.canvas.style.display="none"}show(){this.draw(),this.canvas.style.display="block"}setPos(t,i){if(isNaN(t)||isNaN(i))throw"X and Y must be numbers";this.canvas.style.left=t+"px",this.canvas.style.top=i+"px"}createGradient(t){if(!("gradient"in t))throw"Invalid gradient object";let i;switch(t.gradient){case"radial":i=this.c.createRadialGradient(this.w2,this.h2,this.innerCircle,this.w2,this.h2,this.outerCircle);break;case"linear1":i=this.c.createLinearGradient(0,0,0,this.canvas.height);break;case"linear2":i=this.c.createLinearGradient(0,0,this.canvas.width,0);break;case"linear3":i=this.c.createLinearGradient(0,0,this.canvas.width,this.canvas.height);break;case"linear4":i=this.c.createLinearGradient(0,this.canvas.height,this.canvas.width,0);break;default:throw"Invalid gradient value"}for(const s in t.colors){if(isNaN(s)||s<0||s>1)throw"Invalid color position";i.addColorStop(s,t.colors[s])}return i}checkButtons(){if(!(this.buttons instanceof Array))throw"Buttons must be an Array of button objects";for(let t=0;t<this.buttons.length;t++){const i=this.buttons[t];if(!("text"in i&&"action"in i))throw"Button must have a text and an action value"}}addButtons(t){this.buttons=t,this.checkButtons(),this.init()}}